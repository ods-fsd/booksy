{"version":3,"file":"index.js","sources":["../src/js/header.js","../src/js/helpers.js","../src/js/hero.js","../src/js/products-api.js","../src/js/refs.js","../src/js/render-function.js","../src/js/storage.js","../src/js/modal.js","../src/js/books.js","../src/js/feedbacks.js","../src/js/events.js","../src/js/footer.js","../src/js/button-up.js"],"sourcesContent":["const burgerBtn = document.querySelector('.burger-icon');\nconst menu = document.querySelector('.header-modal');\nconst closeBtn = document.querySelector('.header-modal-nav-close');\nconst body = document.body;\n\nburgerBtn.addEventListener('click', () => {\n  menu.classList.add('is-open');\n  body.classList.add('body--no-scroll');\n});\n\ncloseBtn.addEventListener('click', () => {\n  menu.classList.remove('is-open');\n  body.classList.remove('body--no-scroll');\n});\n\nconst menuLinks = menu.querySelectorAll('a');\n\nmenuLinks.forEach(link => {\n  link.addEventListener('click', e => {\n    const href = link.getAttribute('href');\n\n    if (href.startsWith('#')) {\n      e.preventDefault();\n\n      const target = document.querySelector(href);\n\n      if (target) {\n        menu.classList.remove('is-open');\n        body.classList.remove('body--no-scroll');\n        target.scrollIntoView({\n          behavior: 'smooth',\n          block: 'start',\n        });\n      }\n    } else {\n      body.classList.remove('body--no-scroll');\n    }\n  });\n});\n","//Допоміжні функції\nexport function debounce(func, delay) {\n  let timeout;\n  return (...args) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), delay);\n  };\n}\n\n// Ініціалізація слайдера Swiper\n// Імпортуємо Swiper та необхідні модулі\nimport Swiper from \"swiper\";\nimport {\n  Navigation,\n  Pagination,\n  Parallax,\n  Autoplay,\n  Keyboard,\n} from \"swiper/modules\";\nimport \"swiper/css/bundle\";\n\n/**\n * Ініціалізує слайдер Swiper з підтримкою пагінації, навігації та брейкпоінтів.\n * @param {object} settings - Налаштування слайдера.\n * @returns {Swiper|null}\n */\nexport function initSlider({\n  containerSelector,\n  prevSelector,\n  nextSelector,\n  paginationSelector,\n  customBullet,\n  breakpoints,\n  options = {}, // Додаткові опції для гнучкості\n}) {\n  const root = document.querySelector(containerSelector);\n  if (!root) {\n    console.warn(`Swiper контейнер ${containerSelector} не знайдено`);\n    return null;\n  }\n\n  const prevBtn = prevSelector ? document.querySelector(prevSelector) : null;\n  const nextBtn = nextSelector ? document.querySelector(nextSelector) : null;\n  const paginationEl = paginationSelector\n    ? document.querySelector(paginationSelector)\n    : null;\n\n  // Функція для оновлення стану кнопок навігації\n  function updateArrows(swiperInstance) {\n    if (!prevBtn || !nextBtn) return;\n\n    const isBeginning = swiperInstance.isBeginning;\n    const isEnd = swiperInstance.isEnd;\n\n    prevBtn.disabled = isBeginning;\n    nextBtn.disabled = isEnd;\n    prevBtn.classList.toggle(\"disabled\", isBeginning);\n    nextBtn.classList.toggle(\"disabled\", isEnd);\n  }\n\n  // Збираємо налаштування для Swiper\n  const swiperOptions = {\n    modules: [Navigation, Pagination, Parallax, Autoplay, Keyboard],\n    loop: false,\n    slidesPerView: 1,\n    slidesPerGroup: 1,\n    parallax: true,\n    autoplay: {\n      delay: 10000,\n      disableOnInteraction: true,\n      pauseOnMouseEnter: true,\n    },\n    keyboard: {\n      enabled: true,\n      onlyInViewport: true,\n    },\n    // Налаштування навігації (кнопки \"вперед/назад\")\n    navigation:\n      prevBtn && nextBtn\n        ? {\n            nextEl: nextBtn,\n            prevEl: prevBtn,\n          }\n        : false, // Вимикаємо, якщо кнопок немає\n    // Налаштування пагінації (точки)\n    pagination: paginationEl\n      ? {\n          el: paginationEl,\n          clickable: true,\n          ...(typeof customBullet === \"function\" && {\n            renderBullet: customBullet,\n          }),\n        }\n      : false, // Вимикаємо, якщо пагінації немає\n    breakpoints,\n    on: {\n      // Викликаємо функцію оновлення кнопок при ініціалізації та зміні слайда\n      init: updateArrows,\n      slideChange: updateArrows,\n    },\n    ...options, // Додаємо кастомні опції, щоб вони могли перезаписати дефолтні\n  };\n\n  const swiper = new Swiper(root, swiperOptions);\n\n  // Додаємо обробники кліків для зняття фокусу з кнопок\n  [prevBtn, nextBtn].forEach((btn) => {\n    if (!btn) return;\n    btn.addEventListener(\"click\", () => {\n      btn.blur(); // Прибирає синю рамку фокусу з кнопки після кліку\n    });\n  });\n\n  return swiper;\n}\n","import { initSlider } from './helpers';\n\ninitSlider({\n  containerSelector: '.swiper-hero',\n  prevSelector: '.hero-swiper-btn-prev',\n  nextSelector: '.hero-swiper-btn-next',\n});\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const slides = document.querySelectorAll('.swiper-slide-hero');\n\n  slides.forEach(slide => {\n    const opacity = slide.dataset.overlay;\n\n    if (opacity && Number(opacity) > 0) {\n      const overlay = document.createElement('div');\n      overlay.classList.add('hero-overlay');\n      overlay.style.backgroundColor = `rgba(0, 0, 0, ${opacity})`;\n      slide.appendChild(overlay);\n    }\n  });\n});\n\ndocument.querySelectorAll('.slide-btn[href=\"#books\"]').forEach(btn => {\n  btn.addEventListener('click', e => {\n    e.preventDefault();\n    document.querySelector('#books')?.scrollIntoView();\n  });\n});\n","import axios from 'axios';\n\nconst BASE_URL = 'https://books-backend.p.goit.global/books';\nconst apiClient = axios.create({ baseURL: BASE_URL });\n\n// ---------------- MOCK DATA ----------------\nconst MOCK_CATEGORIES = [\n  'Fiction',\n  'Science',\n  'Romance',\n  'History',\n  'Fantasy',\n  'Business',\n];\n\nconst MOCK_BOOKS = [\n  {\n    _id: 'm1',\n    title: 'Mockingbird Dreams',\n    author: 'Harper Green',\n    book_image: 'https://placehold.co/227x322/EEE/333?text=Mock+1',\n    price: 12.99,\n  },\n  {\n    _id: 'm2',\n    title: 'The Silent Ocean',\n    author: 'Liam Stone',\n    book_image: 'https://placehold.co/227x322/DDD/111?text=Mock+2',\n    price: 9.99,\n  },\n  {\n    _id: 'm3',\n    title: 'Echoes of Tomorrow',\n    author: 'Aria Vale',\n    book_image: 'https://placehold.co/227x322/CCC/000?text=Mock+3',\n    price: 14.99,\n  },\n  {\n    _id: 'm4',\n    title: 'The Quantum Garden',\n    author: 'Soren Blake',\n    book_image: 'https://placehold.co/227x322/BBB/000?text=Mock+4',\n    price: 10.99,\n  },\n  {\n    _id: 'm5',\n    title: 'City of Secrets',\n    author: 'Nora Kade',\n    book_image: 'https://placehold.co/227x322/AAA/000?text=Mock+5',\n    price: 11.49,\n  },\n  {\n    _id: 'm6',\n    title: 'Journey to Orion',\n    author: 'Kai Mercer',\n    book_image: 'https://placehold.co/227x322/999/fff?text=Mock+6',\n    price: 13.99,\n  },\n];\n\n// ---------------- UNIVERSAL FETCH HELPER ----------------\nasync function fetchURL(url = '') {\n  try {\n    const { data } = await apiClient.get(url);\n    return data;\n  } catch (error) {\n    console.warn(`⚠️ API unavailable (${url}). Using mock data instead.`);\n    return null; // повертаємо null, щоб виклик нижче підставив моки\n  }\n}\n\n// ---------------- API-LIKE EXPORTS ----------------\n\nexport async function getCategoryList() {\n  const list = await fetchURL('/category-list');\n  if (!list) return MOCK_CATEGORIES; // fallback\n  return list.map(item => item.list_name);\n}\n\nexport async function getTopBooks() {\n  const response = await fetchURL('/top-books');\n  if (!response) {\n    // fallback: одна категорія з моками\n    return [\n      {\n        list_name: 'Mock Category',\n        books: MOCK_BOOKS,\n      },\n    ];\n  }\n\n  return response.map(category => ({\n    ...category,\n    books: filterUniqueBooksByImage(category.books),\n  }));\n}\n\nexport async function getBooksByCategory(category) {\n  const response = await fetchURL(`/category?category=${encodeURIComponent(category)}`);\n  if (!response) return MOCK_BOOKS; // fallback\n  return filterUniqueBooksByImage(response);\n}\n\nexport async function getBookByID(id) {\n  const response = await fetchURL(`/${id}`);\n  if (!response) {\n    return MOCK_BOOKS.find(b => b._id === id) || MOCK_BOOKS[0];\n  }\n  return response;\n}\n\n// ---------------- HELPERS ----------------\nfunction filterUniqueBooksByImage(books) {\n  const seen = new Set();\n  return books.filter(book => {\n    if (!book.book_image) return false;\n    if (seen.has(book.book_image)) return false;\n    seen.add(book.book_image);\n    return true;\n  });\n}\n","//Обʼєкт з посиланнями на ДОМ елементи\n\nconst refs = {\n  mobMenu: document.querySelector('.mobile-menu'),  // мобільне меню в хедері\n  body: document.body,                              // тіло документа\n};\n\nexport default refs;\n\n\n","//Функцію для створення, рендеру або видалення розмітки\nimport refs from './refs';\n\n//#region Book Modal Render\n// Select elements within the existing modal\nObject.assign(refs, {\n  bookModal_img: document.querySelector('.modal-books_img'),\n  bookModal_title: document.querySelector('.modal-books_title'),\n  bookModal_author: document.querySelector('.modal-books_author'),\n  bookModal_price: document.querySelector('.modal-books_price'),\n  bookModal_details: document.querySelector('[data-ac=\"details\"]'),\n  bookModal_returns: document.querySelector('[data-ac=\"returns\"]'),\n  bookModal_shipping: document.querySelector('[data-ac=\"shipping\"]'),\n  bookModal_data: document.querySelector('.modal-books_data'),\n  bookModal_quantity: document.querySelector('#bookQuantity'),\n});\n\nexport function renderBookModal(dataObj) {\n  refs.bookModal_data.dataset.bookId = dataObj.bookId;\n  refs.bookModal_img.src = dataObj.bookPicture;\n  refs.bookModal_img.alt = dataObj.bookTitle;\n  refs.bookModal_title.textContent = dataObj.bookTitle;\n  refs.bookModal_quantity.value = dataObj.bookQuantity;\n  refs.bookModal_author.textContent = dataObj.bookAuthor;\n  refs.bookModal_price.textContent = '$' + dataObj.bookPrice;\n  refs.bookModal_details.textContent = dataObj.details;\n  refs.bookModal_shipping.textContent = dataObj.shipping;\n  refs.bookModal_returns.textContent = dataObj.returns;\n}\n//#endregion Book Modal Render\n","// Функції для роботи з localStorage\n\nconst CART_STORAGE_KEY = 'shopping_cart';\n\n/**\n * Adds a book to the shopping cart or increases its quantity if already exists\n * @param {string} bookID - Unique identifier of the book\n * @param {number} bookQuantity - Quantity of books to add (must be positive)\n * @returns {boolean} True if successfully added to cart, false otherwise\n * @example\n * // Add 2 copies of book with ID \"xyz\"\n * addToCart(\"xyz\", 2);\n */\nexport function addToCart(bookID, bookQuantity) {\n  if (!bookID || bookQuantity <= 0) {\n    console.warn(\"Wrong parameters, can't add to cart\");\n    return false;\n  }\n\n  const cart = getFullCart();\n  const currentQuantity = cart[bookID] || 0;\n\n  cart[bookID] = Number(currentQuantity) + Number(bookQuantity);\n\n  return saveCart(cart);\n}\n\n/**\n * Removes a specific book from the shopping cart completely\n * @param {string} bookID - Unique identifier of the book to remove\n * @returns {boolean} True if successfully removed, false if bookID is invalid or save failed\n * @example\n * // Remove book with ID \"123\" from cart\n * removeFromCart(\"123\");\n */\nexport function removeFromCart(bookID) {\n  if (!bookID) return false;\n\n  const cart = getFullCart();\n  delete cart[bookID];\n\n  return saveCart(cart);\n}\n\n/**\n * Clears all items from the shopping cart\n * @returns {boolean} True if successfully cleared, false otherwise\n * @example\n * // Remove all items from cart\n * clearCart();\n */\nexport function clearCart() {\n  return saveCart({});\n}\n\n/**\n * Gets the quantity of a specific book in the cart\n * @param {string} bookID - Unique identifier of the book\n * @returns {number} Quantity of the book in cart (0 if not found)\n * @example\n * // Get quantity of book with ID \"123\"\n * getFromCartByID(\"123\");\n */\nexport function getFromCartByID(bookID) {\n  if (!bookID) return 0;\n\n  const cart = getFullCart();\n  return Number(cart[bookID]) || 0;\n}\n\n/**\n * Retrieves the entire shopping cart from localStorage\n * @returns {Object} Cart object with bookID as keys and quantities as values\n * @example\n * // Returns object like: { \"id123\": 2, \"id456\": 1 }\n * const cart = getFullCart();\n */\nexport function getFullCart() {\n  try {\n    const cartData = localStorage.getItem(CART_STORAGE_KEY);\n    return cartData ? JSON.parse(cartData) : {};\n  } catch (error) {\n    console.error('Cart data getting error:', error);\n    return {};\n  }\n}\n\n/**\n * Saves the entire cart object to localStorage\n * @param {Object} cart - Cart object with bookID as keys and quantities as values\n * @returns {boolean} True if successfully saved, false if error occurred\n * @private\n */\nfunction saveCart(cart) {\n  try {\n    localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cart));\n    return true;\n  } catch (error) {\n    console.error('Cart saving error:', error);\n    return false;\n  }\n}\n","import Accordion from 'accordion-js';\nimport 'accordion-js/dist/accordion.min.css';\nimport { renderBookModal } from './render-function';\nimport { getBookByID } from './products-api';\nimport { addToCart, getFromCartByID } from './storage';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// --- Constants for default text ---\nconst DEFAULT_BOOK_DETAILS = {\n  details: `I Will Find You is a gripping thriller by the master of suspense, Harlan Coben. The story follows David Burroughs, a former prisoner wrongfully convicted of murdering his own son. When he discovers a clue suggesting his son might still be alive, David escapes from prison to uncover the truth. Fast-paced, emotional, and full of unexpected twists — this novel will keep you hooked until the very last page.`,\n  shipping: `We ship across the United States within 2–5 business days. All orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50.`,\n  returns: `You can return an item within 14 days of receiving your order, provided it hasn’t been used and is in its original condition. To start a return, please contact our support team — we’ll guide you through the process quickly and hassle-free.`,\n};\n\n// initialise modal-books accordeon\nconst booksAccordion = new Accordion(\n  document.querySelector('.accordion-container'),\n  {\n    showMultiple: true,\n    duration: 400,\n    collapse: true,\n  }\n);\n\nclass Modal {\n  constructor(modalElement) {\n    if (!modalElement) throw new Error('Modal Element not found');\n    this.modalElement = modalElement;\n    this.escapeHandler = this.handleEscape.bind(this);\n    this.closeClickHandler = this.handleCloseClick.bind(this);\n  }\n\n  trapFocusHandler = event => {\n    if (event.key !== 'Tab') return;\n\n    const isShift = event.shiftKey;\n    const active = document.activeElement;\n\n    if (isShift && active === this.firstFocusableElement) {\n      event.preventDefault();\n      this.lastFocusableElement.focus();\n    } else if (!isShift && active === this.lastFocusableElement) {\n      event.preventDefault();\n      this.firstFocusableElement.focus();\n    }\n  };\n\n  open() {\n    this.modalElement.classList.add('is-open');\n    document.body.style.overflow = 'hidden';\n\n    const selectors =\n      'a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex=\"-1\"])';\n\n    this.focuableElements = this.modalElement.querySelectorAll(selectors);\n    this.firstFocusableElement = this.focuableElements[0];\n    this.lastFocusableElement =\n      this.focuableElements[this.focuableElements.length - 1];\n    this.firstFocusableElement?.focus();\n\n    document.addEventListener('keydown', this.trapFocusHandler);\n    document.addEventListener('keydown', this.escapeHandler);\n    this.modalElement.addEventListener('click', this.closeClickHandler);\n  }\n\n  close() {\n    this.modalElement.classList.remove('is-open');\n    document.body.style.overflow = '';\n    document.removeEventListener('keydown', this.trapFocusHandler);\n    document.removeEventListener('keydown', this.escapeHandler);\n    this.modalElement.removeEventListener('click', this.closeClickHandler);\n  }\n\n  handleEscape(event) {\n    if (event.key === 'Escape') this.close();\n  }\n\n  handleCloseClick(event) {\n    const closeBtn = this.modalElement.querySelector('.modal_close-btn');\n    const isCloseButtonClick = closeBtn && closeBtn.contains(event.target);\n    const isOverlayClick = event.target === this.modalElement;\n    if (isCloseButtonClick || isOverlayClick) this.close();\n  }\n}\n\nclass ContactModal extends Modal {\n  constructor(modalElement) {\n    super(modalElement);\n    this.form = this.modalElement.querySelector('#contactForm');\n    this.nameInput = this.form.querySelector('#user_name');\n    this.emailInput = this.form.querySelector('#user_email');\n    this.messageInput = this.form.querySelector('#user_message');\n    this.nameErrorContainer = this.form.querySelector(\n      '.contact-form-name .validation-error'\n    );\n    this.emailErrorContainer = this.form.querySelector(\n      '.contact-form-email .validation-error'\n    );\n    this.messageErrorContainer = this.form.querySelector(\n      '.contact-form-message .validation-error'\n    );\n\n    if (!this.form) throw new Error('Contact form not found in the modal');\n    this.submitHandler = this.handleSubmit.bind(this);\n    this.handleNameInput = this.clearErrorContainer.bind(\n      this,\n      this.nameInput,\n      this.nameErrorContainer\n    );\n    this.handleEmailInput = this.clearErrorContainer.bind(\n      this,\n      this.emailInput,\n      this.emailErrorContainer\n    );\n    this.handleMessageInput = this.clearErrorContainer.bind(\n      this,\n      this.messageInput,\n      this.messageErrorContainer\n    );\n  }\n\n  clearErrorContainer(inputElement, errorContainer) {\n    inputElement.classList.remove('invalid');\n    errorContainer.innerText = '';\n  }\n\n  open() {\n    super.open();\n    this.form.addEventListener('submit', this.submitHandler);\n    this.nameInput.addEventListener('focus', this.handleNameInput);\n    this.emailInput.addEventListener('focus', this.handleEmailInput);\n    this.messageInput.addEventListener('focus', this.handleMessageInput);\n  }\n\n  close() {\n    super.close();\n    this.form.removeEventListener('submit', this.submitHandler);\n    this.nameInput.removeEventListener('focus', this.handleNameInput);\n    this.emailInput.removeEventListener('focus', this.handleEmailInput);\n    this.messageInput.removeEventListener('focus', this.handleMessageInput);\n    this.form.reset();\n  }\n\n  validate() {\n    const errorsArr = [];\n    const errorMessage = {\n      name: '❌ Please enter valid Name',\n      email: {\n        valid: '❌ Please enter valid Email',\n        required: '❌ Email is a required field',\n      },\n      message: '❌ Message can not be empty',\n    };\n    // Reset previous validation states\n    this.nameInput.classList.remove('invalid');\n    this.emailInput.classList.remove('invalid');\n    this.messageInput.classList.remove('invalid');\n\n    // Name validation\n    if (this.nameInput.value.trim() === '') {\n      errorsArr.push(errorMessage.name);\n      this.nameInput.classList.add('invalid');\n      this.nameErrorContainer.innerText = errorMessage.name;\n    }\n\n    // simple Email validation\n    const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (this.emailInput.value.trim() === '') {\n      // if empty\n      errorsArr.push(errorMessage.email.required);\n      this.emailInput.classList.add('invalid');\n      this.emailErrorContainer.innerText = errorMessage.email.required;\n    } else if (!emailPattern.test(this.emailInput.value)) {\n      // if invalid\n      errorsArr.push(errorMessage.email.valid);\n      this.emailInput.classList.add('invalid');\n      this.emailErrorContainer.innerText = errorMessage.email.valid;\n    }\n\n    // Message validation\n    if (this.messageInput.value.trim() === '') {\n      errorsArr.push(errorMessage.message);\n      this.messageInput.classList.add('invalid');\n      this.messageErrorContainer.innerText = errorMessage.message;\n    }\n\n    return errorsArr;\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    const formData = new FormData(this.form);\n    const data = Object.fromEntries(formData.entries());\n\n    // Call the validate method\n    const validationErrors = this.validate();\n    if (validationErrors.length > 0) {\n      return; // Stop the submission\n    }\n\n    try {\n      await this.submitForm(data);\n      iziToast.show({\n        position: 'center',\n        theme: 'light',\n        message: `❤︎ Your registration has been submitted.`,\n      });\n      this.close();\n    } catch (error) {\n      console.error('Form submission error:', error);\n      iziToast.show({\n        position: 'center',\n        theme: 'light',\n        message: `✖ 'There was an error submitting your registration. Please try again.'`,\n      });\n    }\n  }\n\n  async submitForm(data) {\n    console.log('Submitting form data:', data);\n  }\n}\n\n// --- Books Modal Class ---\nclass BooksModal extends Modal {\n  constructor(modalElement) {\n    super(modalElement);\n    this.eventHandler = this.handleEvents.bind(this);\n  }\n\n  async open(bookId) {\n    try {\n      const bookData = await getBookByID(bookId);\n      const dataObj = this.prepareData(bookData);\n      renderBookModal(dataObj);\n\n      if (booksAccordion) booksAccordion.closeAll();\n\n      super.open(); // Call open from the base class after content is ready\n\n      this.form = this.modalElement.querySelector('#bookModalActionForm');\n      if (this.form) {\n        this.form.addEventListener('click', this.eventHandler);\n        this.form.addEventListener('submit', this.eventHandler);\n      }\n    } catch (error) {\n      console.error(`Error loading book with ID ${bookId}:`, error);\n      iziToast.show({\n        position: 'center',\n        theme: 'light',\n        message: `✖ 'Sorry, couldn't load the book details. Please try again later.'`,\n      });\n    }\n  }\n\n  close() {\n    super.close();\n    if (this.form) {\n      this.form.removeEventListener('click', this.eventHandler);\n      this.form.removeEventListener('submit', this.eventHandler);\n    }\n  }\n\n  prepareData(response) {\n    return {\n      bookId: response._id,\n      bookPicture: response.book_image,\n      bookTitle: response.title,\n      bookAuthor: response.author,\n      bookPrice: Number(response.price) || '9.99',\n      bookQuantity: 1,\n      details: response.details || DEFAULT_BOOK_DETAILS.details,\n      shipping: response.shipping || DEFAULT_BOOK_DETAILS.shipping,\n      returns: response.returns || DEFAULT_BOOK_DETAILS.returns,\n    };\n  }\n\n  handleEvents(event) {\n    event.preventDefault();\n    const target = event.target;\n    const action = target.dataset.action;\n\n    switch (action) {\n      case 'decrease':\n        this.updateQuantity(-1);\n        break;\n      case 'increase':\n        this.updateQuantity(1);\n        break;\n      case 'add-to-cart':\n        this.handleAddToCart(target);\n        break;\n      case 'buy-now':\n        this.handleBuyNow();\n        break;\n    }\n\n    if (event.type === 'submit') this.handleBuyNow();\n  }\n\n  updateQuantity(change) {\n    const quantityInput = this.form.querySelector('.quantity-input');\n    let currentValue = parseInt(quantityInput.value);\n    const newValue = currentValue + change;\n\n    if (newValue >= 1) quantityInput.value = newValue;\n  }\n\n  handleAddToCart(button) {\n    const modalData = button.closest('[data-book-id]');\n    const bookId = modalData.dataset.bookId;\n    const quantity = parseInt(this.form.querySelector('.quantity-input').value);\n\n    iziToast.show({\n      iconUrl: '/img/icons.svg',\n      theme: 'light',\n      progressBar: true,\n      message: `Book (${quantity} pcs) added`,\n      target: '.modal-books_message-container',\n      timeout: 3000,\n      // replace izitost image tag to use sprite\n      onOpening: function (instance, toast) {\n        replaceIziToastIcon(toast, '/img/icons.svg#icon-shopping-basket');\n      },\n    });\n\n    console.log(`Book with ID '${bookId}' (qty: ${quantity}) added to Cart.`);\n    console.log(`Total ID '${bookId}' in Cart: ${getFromCartByID(bookId)}`);\n\n    addToCart(bookId, quantity);\n  }\n\n  handleBuyNow() {\n    console.log('\"Buy Now\" clicked.');\n    iziToast.show({\n      iconUrl: '/img/icons.svg',\n      position: 'center',\n      theme: 'light',\n      message: `Thanks for buying!`,\n      timeout: 3000,\n      onOpening: function (instance, toast) {\n        replaceIziToastIcon(toast, '/img/icons.svg#icon-shopping-basket');\n      },\n    });\n\n    this.close();\n  }\n}\n\n/**  * Replaces the default <img> icon in an iziToast notification with a\n  custom <svg> element that uses a sprite icon.\n*\n* This function is a workaround to use SVG sprites with iziToast, which natively  \n* only supports direct image URLs. It finds the <img> icon element within the toast\n* and replaces it with a programmatically created <svg> and <use> element.  \n* It is critical to call this function within the `onOpening` callback of `iziToast.show()`,\n* as this guarantees the toast element exists in the DOM and is ready for manipulation.\n*\n* @private\n* @param {HTMLElement} toastElement - The toast DOM element, provided by the `onOpening` callback.\n* @param {string} iconHref - The full path to the SVG icon within the sprite file (e.g., '/img/icons.svg#icon-shopping-basket').\n* @returns {void}\n*/\nfunction replaceIziToastIcon(toastElement, iconHref) {\n  const imgElement = toastElement.querySelector('.iziToast-icon');\n  if (imgElement) {\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute(\n      'class',\n      `${imgElement.getAttribute('class')} revealIn customIziToastIcon`\n    );\n    svg.setAttribute('width', '24');\n    svg.setAttribute('height', '24');\n    const use = document.createElementNS('http://www.w3.org/2000/svg', 'use');\n    use.setAttributeNS('http://www.w3.org/1999/xlink', 'href', iconHref);\n\n    svg.appendChild(use);\n    imgElement.parentNode.replaceChild(svg, imgElement);\n  }\n}\n\n// --- Initialization ---\nconst contactModalElement = document.querySelector('.modal-contacts');\nconst booksModalElement = document.querySelector('.modal-books');\n\nlet contactModal, booksModal;\n\nif (contactModalElement) {\n  contactModal = new ContactModal(contactModalElement);\n}\n\nif (booksModalElement) {\n  booksModal = new BooksModal(booksModalElement);\n}\n\n/**\n * Opens the contacts modal and dynamically sets its description text.\n * If no event name is provided, it will use a default string.\n * @param {string} booksyEvent - The name of the event or context to display in the modal's description.\n */\nexport function openContactsModal(booksyEvent = `Children’s Story Hour`) {\n  if (contactModal) {\n    document.querySelector('#modalDesc').textContent = booksyEvent;\n    contactModal.open();\n  } else {\n    console.error('Contact modal is not initialized.');\n  }\n}\n\n/**\n * Opens the books modal and fetches the details for a specific book.\n * If no id is provided, it will use a default string.\n * @param {string} bookId - The unique ID of the book to display.\n */\nexport function openBooksModal(bookId = '660df41ba957e5c1ae0f519e') {\n  if (booksModal) {\n    booksModal.open(bookId);\n  } else {\n    console.error('Books modal is not initialized.');\n  }\n}\n\n\n\nwindow.addEventListener('open-contacts-modal', event => {\n  const eventTitle = event.detail?.title;\n\n  if (eventTitle) {\n    openContactsModal(eventTitle);\n  } else {\n    console.warn('Спроба відкрити модальне вікно реєстрації без назви події.');\n    openContactsModal();\n  }\n});","import {\n  getTopBooks,\n  getBooksByCategory,\n  getCategoryList,\n} from './products-api';\nimport { openBooksModal } from './modal';\n\nconst gallery = document.querySelector('.gallery');\nconst select = document.querySelector('#category-select');\nconst showMore = document.querySelector('.btn-show-more');\nconst visibleCounter = document.querySelector('.visible-books');\nconst totalCounter = document.querySelector('.total-books');\nconst list = document.querySelector('.categories-list');\nconst loader = document.querySelector('.loader');\n\n// Кастомний dropdown\nconst selectBtn = document.querySelector('.category-select-btn');\nconst selectText = document.querySelector('.category-select-text');\nconst dropdown = document.querySelector('.category-dropdown');\n\nlet allBooks = [];\nlet visibleCount = 0;\nlet currentBreakpoint = window.innerWidth < 768 ? 'mobile' : 'desktop';\nlet isDropdownOpen = false;\n\nfunction showLoader() {\n  loader?.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader?.classList.add('hidden');\n}\n\n// --- ІНІЦІАЛІЗАЦІЯ ---\nasync function initializeBooks() {\n  showLoader();\n  try {\n    const categoryList = await getCategoryList();\n    renderCategoriesList(categoryList);\n\n    const topBooksData = await getTopBooks();\n    allBooks = topBooksData.flatMap(({ books }) => books);\n    renderBooks();\n  } catch (error) {\n    console.error('❌ Помилка завантаження даних:', error);\n    gallery.innerHTML = '<li class=\"no-books\">Не вдалося завантажити книги. Спробуйте пізніше.</li>';\n  } finally {\n    hideLoader();\n  }\n}\ninitializeBooks();\n\n// --- РЕНДЕР КАТЕГОРІЙ ---\nfunction renderCategoriesList(categories) {\n  // Старий select (прихований)\n  select.innerHTML =\n    '<option selected value=\"All categories\">All categories</option>';\n  \n  // Desktop список кнопок\n  list.innerHTML =\n    '<li><button type=\"button\" class=\"category-btn active-category\" value=\"All categories\">All categories</button></li>';\n\n  // Mobile/Tablet dropdown\n  dropdown.innerHTML = `\n    <li class=\"category-dropdown-item\">\n      <button type=\"button\" class=\"category-dropdown-btn active\" data-value=\"All categories\">\n        All categories\n      </button>\n    </li>\n  `;\n\n  categories.forEach(cat => {\n    // Старий select\n    const option = document.createElement('option');\n    option.value = cat;\n    option.textContent = cat;\n    select.appendChild(option);\n\n    // Desktop список\n    const item = document.createElement('li');\n    item.classList.add('category-item');\n    const button = document.createElement('button');\n    button.type = 'button';\n    button.value = cat;\n    button.textContent = cat;\n    button.classList.add('category-btn');\n    item.appendChild(button);\n    list.appendChild(item);\n\n    // Mobile dropdown\n    const dropdownItem = document.createElement('li');\n    dropdownItem.classList.add('category-dropdown-item');\n    const dropdownBtn = document.createElement('button');\n    dropdownBtn.type = 'button';\n    dropdownBtn.classList.add('category-dropdown-btn');\n    dropdownBtn.dataset.value = cat;\n    dropdownBtn.textContent = cat;\n    dropdownItem.appendChild(dropdownBtn);\n    dropdown.appendChild(dropdownItem);\n  });\n}\n\n// --- КАСТОМНИЙ DROPDOWN ---\nfunction toggleDropdown() {\n  isDropdownOpen = !isDropdownOpen;\n  dropdown?.classList.toggle('hidden', !isDropdownOpen);\n  selectBtn?.classList.toggle('open', isDropdownOpen);\n}\n\nfunction selectCategoryFromDropdown(category) {\n  // Оновлюємо текст кнопки\n  if (selectText) {\n    selectText.textContent = category === 'All categories' ? 'Categories' : category;\n  }\n  \n  // Оновлюємо активний стан у dropdown\n  dropdown?.querySelectorAll('.category-dropdown-btn').forEach(btn => {\n    btn.classList.toggle('active', btn.dataset.value === category);\n  });\n  \n  // Закриваємо dropdown\n  toggleDropdown();\n  \n  // Завантажуємо книги\n  selectCategory(category);\n}\n\n// Event listeners для dropdown\nselectBtn?.addEventListener('click', (e) => {\n  e.stopPropagation();\n  toggleDropdown();\n});\n\ndropdown?.addEventListener('click', (e) => {\n  const btn = e.target.closest('.category-dropdown-btn');\n  if (!btn) return;\n  selectCategoryFromDropdown(btn.dataset.value);\n});\n\n// Закриття при кліку поза dropdown\ndocument.addEventListener('click', (e) => {\n  if (isDropdownOpen && !selectBtn?.contains(e.target) && !dropdown?.contains(e.target)) {\n    toggleDropdown();\n  }\n});\n\n// Закриття при ESC\ndocument.addEventListener('keydown', (e) => {\n  if (e.key === 'Escape' && isDropdownOpen) {\n    toggleDropdown();\n  }\n});\n\n// --- ОБРОБКА ВИБОРУ КАТЕГОРІЇ ---\nasync function selectCategory(category) {\n  showLoader();\n\n  select.value = category;\n  list.querySelectorAll('.category-btn').forEach(btn =>\n    btn.classList.toggle('active-category', btn.value === category)\n  );\n\n  try {\n    if (category === 'All categories') {\n      const topBooksData = await getTopBooks();\n      allBooks = topBooksData.flatMap(({ books }) => books);\n    } else {\n      allBooks = await getBooksByCategory(category);\n    }\n\n    visibleCount = getInitialCount();\n    renderBooks();\n  } catch (error) {\n    console.error('❌ Помилка при завантаженні книг:', error);\n    gallery.innerHTML = '<li class=\"no-books\">Не вдалося завантажити книги цієї категорії</li>';\n  } finally {\n    hideLoader();\n  }\n}\n\n// Desktop категорії (клік на список)\nlist.addEventListener('click', e => {\n  e.preventDefault();\n  const btn = e.target.closest('.category-btn');\n  if (!btn) return;\n  selectCategory(btn.value);\n});\n\n// --- ПОКАЗ ЩЕ ---\nshowMore.addEventListener('click', () => {\n  visibleCount += 4;\n  updateBooksList();\n  showMore.blur();\n});\n\n// --- РЕНДЕР КНИГ ---\nfunction renderBooks() {\n  visibleCount = getInitialCount();\n  updateBooksList();\n  totalCounter.textContent = allBooks.length;\n\n  toggleShowMoreVisibility();\n}\n\nfunction updateBooksList() {\n  const currentSlice = allBooks.slice(0, visibleCount);\n  showLoader();\n\n  requestAnimationFrame(() => {\n    setTimeout(() => {\n      if (currentSlice.length === 0) {\n        gallery.innerHTML = '<li class=\"no-books\">No books found</li>';\n        visibleCounter.textContent = 0;\n        showMore.classList.add('btn-show-more-hidden');\n        hideLoader();\n        return;\n      }\n\n      gallery.innerHTML = createMarkup(currentSlice);\n      visibleCounter.textContent = Math.min(visibleCount, allBooks.length);\n      toggleShowMoreVisibility();\n      hideLoader();\n    }, 100);\n  });\n}\n\nfunction toggleShowMoreVisibility() {\n  if (visibleCount >= allBooks.length) {\n    showMore.classList.add('btn-show-more-hidden');\n  } else {\n    showMore.classList.remove('btn-show-more-hidden');\n  }\n}\n\nfunction getInitialCount() {\n  return window.innerWidth < 768 ? 10 : 24;\n}\n\n// --- АДАПТИВНИЙ РЕРЕНДЕР ---\nwindow.addEventListener(\n  'resize',\n  debounce(() => {\n    const newBreakpoint = window.innerWidth < 768 ? 'mobile' : 'desktop';\n    if (newBreakpoint !== currentBreakpoint) {\n      currentBreakpoint = newBreakpoint;\n      renderBooks();\n    }\n  }, 300)\n);\n\n// --- ДОДАТКОВІ ХЕЛПЕРИ ---\nfunction debounce(func, wait) {\n  let timeout;\n  return (...args) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), wait);\n  };\n}\n\n// --- МОДАЛКА ---\ngallery.addEventListener('click', event => {\n  const btn = event.target.closest('.btn-book');\n  if (!btn) return;\n  openBooksModal(btn.dataset.id);\n});\n\n// --- HTML РЕНДЕРИНГ ---\nfunction createMarkup(data) {\n  return data\n    .map(({ title, author, book_image, price, _id }, index) => {\n      const displayPrice =\n        typeof price === 'number'\n          ? price.toFixed(2)\n          : price && price.trim() !== '0.00'\n          ? price.trim()\n          : '9.99';\n\n      const safeTitle = escapeHtml(title);\n      const safeAuthor = escapeHtml(author);\n      const loadingAttr = index < 3 ? 'eager' : 'lazy';\n\n      return `\n        <li class=\"book-card\">\n          <img\n            loading=\"${loadingAttr}\"\n            class=\"book-cover\"\n            src=\"${book_image}\"\n            alt=\"Book cover: ${safeTitle} by ${safeAuthor}\"\n            width=\"150\"\n            height=\"auto\"\n          />\n          <div class=\"book-card-info\">\n            <div class=\"book-card-descriptions\">\n              <h3 class=\"book-card-title\">${safeTitle.toLowerCase()}</h3>\n              <h4 class=\"book-card-author\">${safeAuthor}</h4>\n            </div>\n            <p class=\"book-price\">$${displayPrice}</p>\n          </div>\n          <button\n            type=\"button\"\n            class=\"btn-secondary btn-book\"\n            data-id=\"${_id}\"\n            aria-label=\"Learn more about ${safeTitle} by ${safeAuthor}\"\n          >\n            Learn more\n          </button>\n        </li>`;\n    })\n    .join('');\n}\n\nfunction escapeHtml(text = '') {\n  const map = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '\"': '&quot;', \"'\": '&#039;' };\n  return text.replace(/[&<>\"']/g, m => map[m]);\n}","import Swiper from 'swiper';\nimport { Navigation, Pagination, Keyboard, A11y } from 'swiper/modules';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\n\nexport function initFeedbacksSlider() {\n  const container = document.querySelector('.feedbacks-swiper');\n  if (!container) return;\n\n  // Контролли ЗОВНІ — шукаємо в document, а не всередині swiper\n  const prevBtn = document.querySelector('.feedbacks-nav__btn--prev');\n  const nextBtn = document.querySelector('.feedbacks-nav__btn--next');\n  const paginationEl = document.querySelector('.feedbacks-pagination');\n\n  // src/js/feedbacks.js\n  const swiper = new Swiper(container, {\n    modules: [Navigation, Pagination, Keyboard, A11y],\n    slidesPerView: 1,\n    spaceBetween: 16,\n\n    // 1) Прибрати це:\n    // rewind: true,\n\n    // 2) (опційно, але рекомендовано)\n    watchOverflow: true,\n\n    navigation: { nextEl: nextBtn, prevEl: prevBtn },\n    pagination: { el: paginationEl, clickable: true, dynamicBullets: true },\n\n    keyboard: { enabled: true, onlyInViewport: true },\n    a11y: { enabled: true },\n\n    breakpoints: {\n      768: { slidesPerView: 2, spaceBetween: 24 },\n      1440: { slidesPerView: 3, spaceBetween: 24 },\n    },\n  });\n\n  // 3) Залишити примусове оновлення пагінації\n  swiper.on('afterInit', () => {\n    swiper.pagination?.render?.();\n    swiper.pagination?.update?.();\n  });\n}\n\ndocument.addEventListener('DOMContentLoaded', initFeedbacksSlider);\n","import Swiper from 'swiper';\nimport { Navigation, Pagination } from 'swiper/modules';\n\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\n\nconst swiper = new Swiper('.ev-swiper', {\n  modules: [Navigation, Pagination],\n\n  wrapperClass: 'ev-list',\n  slideClass: 'ev-item',\n\n  slidesPerView: 1,\n  spaceBetween: 24,\n\n  breakpoints: {\n    768: { slidesPerView: 2, spaceBetween: 24 },\n    1440: { slidesPerView: 3, spaceBetween: 24 },\n  },\n\n  pagination: {\n    el: '.ev-pagination',\n    clickable: true,\n    bulletElement: 'li',\n    bulletClass: 'ev-dot',\n    bulletActiveClass: 'ev-dot--active',\n    renderBullet: (index, className) =>\n      `<li class=\"${className}\" aria-label=\"Go to slide ${index + 1}\" tabindex=\"0\"></li>`,\n  },\n\n  navigation: {\n    prevEl: '.ev-swipe-btn-prev',\n    nextEl: '.ev-swipe-btn-next',\n  },\n\n  watchOverflow: true,\n});\n\nconst prevBtn = document.querySelector('.ev-swipe-btn-prev');\nconst nextBtn = document.querySelector('.ev-swipe-btn-next');\n\nfunction syncDisabled() {\n  const atStart = swiper.isBeginning;\n  const atEnd = swiper.isEnd;\n\n  prevBtn.toggleAttribute('disabled', atStart);\n  nextBtn.toggleAttribute('disabled', atEnd);\n\n  prevBtn.setAttribute('aria-disabled', String(atStart));\n  nextBtn.setAttribute('aria-disabled', String(atEnd));\n}\n\nswiper.on('afterInit', syncDisabled);\nswiper.on('slideChange', syncDisabled);\nswiper.on('update', syncDisabled);\nsyncDisabled();\n\n// modalka\ndocument.querySelector('.events-section')?.addEventListener('click', e => {\n  const btn = e.target.closest('.js-register');\n  if (!btn) return;\n\n  const payload = {\n    title: btn.dataset.title || 'Register',\n    date: btn.dataset.date || '',\n    format: btn.dataset.format || '',\n  };\n\n  window.dispatchEvent(new CustomEvent('open-contacts-modal', { detail: payload }));\n});","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form-footer');\nconst emailInput = document.querySelector('.email-input');\n\nform.addEventListener('submit', function (e) {\n  e.preventDefault();\n\n  const email = emailInput.value.trim();\n\n\n  if (!validateEmail(email)) {\n    iziToast.error({\n      theme: 'light',\n      title: 'Error',\n      message: 'Please enter a valid email address.',\n      position: 'topRight',\n      timeout: 3000,\n    });\n    return;\n  }\n\n\n  fetch('https://jsonplaceholder.typicode.com/posts', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ email: email }),\n  })\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      return response.json();\n    })\n    .then(data => {\n\n      iziToast.success({\n        theme: 'light',\n        title: 'Success',\n        message: 'Thank you for subscribing!',\n        position: 'topRight',\n        timeout: 3000,\n      });\n      emailInput.value = '';\n    })\n    .catch(error => {\n\n      iziToast.error({\n        theme: 'light',\n        title: 'Error',\n        message: 'There was an error processing your request. Please try again later.',\n        position: 'topRight',\n        timeout: 3000,\n      });\n    });\n});\n\nfunction validateEmail(email) {\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n}\n","// src/js/button-up.js\n\nconst buttonUp = document.querySelector(\".btn-up\");\n\n// Функція, яка показує/ховає кнопку\nfunction handleScroll() {\n  // Висота, після якої кнопка з'явиться (наприклад, висота одного екрана)\n  const showHeight = window.innerHeight;\n\n  if (window.scrollY > showHeight) {\n    buttonUp.classList.add(\"is-visible\");\n  } else {\n    buttonUp.classList.remove(\"is-visible\");\n  }\n}\n\n// Функція плавної прокрутки до верху\nfunction scrollToTop() {\n  window.scrollTo({\n    top: 0,\n    behavior: \"smooth\",\n  });\n}\n\n// Додаємо слухачів подій\nif (buttonUp) {\n  window.addEventListener(\"scroll\", handleScroll);\n  buttonUp.addEventListener(\"click\", scrollToTop);\n}\n"],"names":["burgerBtn","menu","closeBtn","body","menuLinks","link","href","target","initSlider","containerSelector","prevSelector","nextSelector","paginationSelector","customBullet","breakpoints","options","root","prevBtn","nextBtn","paginationEl","updateArrows","swiperInstance","isBeginning","isEnd","swiperOptions","Navigation","Pagination","Parallax","Autoplay","Keyboard","swiper","Swiper","btn","slide","opacity","overlay","_a","BASE_URL","apiClient","axios","MOCK_CATEGORIES","MOCK_BOOKS","fetchURL","url","data","getCategoryList","list","item","getTopBooks","response","category","filterUniqueBooksByImage","getBooksByCategory","getBookByID","id","b","books","seen","book","refs","renderBookModal","dataObj","CART_STORAGE_KEY","addToCart","bookID","bookQuantity","cart","getFullCart","currentQuantity","saveCart","getFromCartByID","cartData","error","DEFAULT_BOOK_DETAILS","booksAccordion","Accordion","Modal","modalElement","__publicField","event","isShift","active","selectors","isCloseButtonClick","isOverlayClick","ContactModal","inputElement","errorContainer","errorsArr","errorMessage","emailPattern","formData","iziToast","BooksModal","bookId","bookData","change","quantityInput","newValue","button","quantity","instance","toast","replaceIziToastIcon","toastElement","iconHref","imgElement","svg","use","contactModalElement","booksModalElement","contactModal","booksModal","openContactsModal","booksyEvent","openBooksModal","eventTitle","gallery","select","showMore","visibleCounter","totalCounter","loader","selectBtn","selectText","dropdown","allBooks","visibleCount","currentBreakpoint","isDropdownOpen","showLoader","hideLoader","initializeBooks","categoryList","renderCategoriesList","renderBooks","categories","cat","option","dropdownItem","dropdownBtn","toggleDropdown","selectCategoryFromDropdown","selectCategory","e","getInitialCount","updateBooksList","toggleShowMoreVisibility","currentSlice","createMarkup","debounce","newBreakpoint","func","wait","timeout","args","title","author","book_image","price","_id","index","displayPrice","safeTitle","escapeHtml","safeAuthor","text","map","m","initFeedbacksSlider","container","A11y","_b","_d","_c","className","syncDisabled","atStart","atEnd","payload","form","emailInput","email","validateEmail","buttonUp","handleScroll","showHeight","scrollToTop"],"mappings":"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"}