var be=Object.defineProperty;var fe=(t,e,o)=>e in t?be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var R=(t,e,o)=>fe(t,typeof e!="symbol"?e+"":e,o);import{N as P,P as F,a as ge,A as ye,K as ne,S as $,b as ve,c as ke,i as h,d as we}from"./assets/vendor-BHxofFQz.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const Ee=document.querySelector(".burger-icon"),M=document.querySelector(".header-modal"),Le=document.querySelector(".header-modal-nav-close"),E=document.body;Ee.addEventListener("click",()=>{M.classList.add("is-open"),E.classList.add("body--no-scroll")});Le.addEventListener("click",()=>{M.classList.remove("is-open"),E.classList.remove("body--no-scroll")});const Se=M.querySelectorAll("a");Se.forEach(t=>{t.addEventListener("click",e=>{const o=t.getAttribute("href");if(o.startsWith("#")){e.preventDefault();const r=document.querySelector(o);r&&(M.classList.remove("is-open"),E.classList.remove("body--no-scroll"),r.scrollIntoView({behavior:"smooth",block:"start"}))}else E.classList.remove("body--no-scroll")})});function Ce({containerSelector:t,prevSelector:e,nextSelector:o,paginationSelector:r,customBullet:n,breakpoints:s,options:i={}}){const u=document.querySelector(t);if(!u)return console.warn(`Swiper контейнер ${t} не знайдено`),null;const l=e?document.querySelector(e):null,d=o?document.querySelector(o):null,x=r?document.querySelector(r):null;function V(b){if(!l||!d)return;const K=b.isBeginning,U=b.isEnd;l.disabled=K,d.disabled=U,l.classList.toggle("disabled",K),d.classList.toggle("disabled",U)}const he={modules:[P,F,ge,ye,ne],loop:!1,slidesPerView:1,slidesPerGroup:1,parallax:!0,autoplay:{delay:1e4,disableOnInteraction:!0,pauseOnMouseEnter:!0},keyboard:{enabled:!0,onlyInViewport:!0},navigation:l&&d?{nextEl:d,prevEl:l}:!1,pagination:x?{el:x,clickable:!0,...typeof n=="function"&&{renderBullet:n}}:!1,breakpoints:s,on:{init:V,slideChange:V},...i},pe=new $(u,he);return[l,d].forEach(b=>{b&&b.addEventListener("click",()=>{b.blur()})}),pe}Ce({containerSelector:".swiper-hero",prevSelector:".hero-swiper-btn-prev",nextSelector:".hero-swiper-btn-next"});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".swiper-slide-hero").forEach(e=>{const o=e.dataset.overlay;if(o&&Number(o)>0){const r=document.createElement("div");r.classList.add("hero-overlay"),r.style.backgroundColor=`rgba(0, 0, 0, ${o})`,e.appendChild(r)}})});document.querySelectorAll('.slide-btn[href="#books"]').forEach(t=>{t.addEventListener("click",e=>{var o;e.preventDefault(),(o=document.querySelector("#books"))==null||o.scrollIntoView()})});const qe="https://books-backend.p.goit.global/books",Me=ve.create({baseURL:qe}),_e=["Fiction","Science","Romance","History","Fantasy","Business"],L=[{_id:"m1",title:"Mockingbird Dreams",author:"Harper Green",book_image:"https://placehold.co/227x322/EEE/333?text=Mock+1",price:12.99},{_id:"m2",title:"The Silent Ocean",author:"Liam Stone",book_image:"https://placehold.co/227x322/DDD/111?text=Mock+2",price:9.99},{_id:"m3",title:"Echoes of Tomorrow",author:"Aria Vale",book_image:"https://placehold.co/227x322/CCC/000?text=Mock+3",price:14.99},{_id:"m4",title:"The Quantum Garden",author:"Soren Blake",book_image:"https://placehold.co/227x322/BBB/000?text=Mock+4",price:10.99},{_id:"m5",title:"City of Secrets",author:"Nora Kade",book_image:"https://placehold.co/227x322/AAA/000?text=Mock+5",price:11.49},{_id:"m6",title:"Journey to Orion",author:"Kai Mercer",book_image:"https://placehold.co/227x322/999/fff?text=Mock+6",price:13.99}];async function _(t=""){try{const{data:e}=await Me.get(t);return e}catch{return console.warn(`⚠️ API unavailable (${t}). Using mock data instead.`),null}}async function Ie(){const t=await _("/category-list");return t?t.map(e=>e.list_name).filter(e=>e&&e.trim().length>0):_e}async function re(){const t=await _("/top-books");return t?t.map(e=>({...e,books:se(e.books)})):[{list_name:"Mock Category",books:L}]}async function Be(t){const e=await _(`/category?category=${encodeURIComponent(t)}`);return e?se(e):L}async function xe(t){const e=await _(`/${t}`);return e||L.find(o=>o._id===t)||L[0]}function se(t){const e=new Set;return t.filter(o=>!o.book_image||e.has(o.book_image)?!1:(e.add(o.book_image),!0))}const c={mobMenu:document.querySelector(".mobile-menu"),body:document.body};Object.assign(c,{bookModal_img:document.querySelector(".modal-books_img"),bookModal_title:document.querySelector(".modal-books_title"),bookModal_author:document.querySelector(".modal-books_author"),bookModal_price:document.querySelector(".modal-books_price"),bookModal_details:document.querySelector('[data-ac="details"]'),bookModal_returns:document.querySelector('[data-ac="returns"]'),bookModal_shipping:document.querySelector('[data-ac="shipping"]'),bookModal_data:document.querySelector(".modal-books_data"),bookModal_quantity:document.querySelector("#bookQuantity")});function Ae(t){c.bookModal_data.dataset.bookId=t.bookId,c.bookModal_img.src=t.bookPicture,c.bookModal_img.alt=t.bookTitle,c.bookModal_title.textContent=t.bookTitle,c.bookModal_quantity.value=t.bookQuantity,c.bookModal_author.textContent=t.bookAuthor,c.bookModal_price.textContent="$"+t.bookPrice,c.bookModal_details.textContent=t.details,c.bookModal_shipping.textContent=t.shipping,c.bookModal_returns.textContent=t.returns}const ie="shopping_cart";function Te(t,e){if(!t||e<=0)return console.warn("Wrong parameters, can't add to cart"),!1;const o=ae(),r=o[t]||0;return o[t]=Number(r)+Number(e),He(o)}function De(t){if(!t)return 0;const e=ae();return Number(e[t])||0}function ae(){try{const t=localStorage.getItem(ie);return t?JSON.parse(t):{}}catch(t){return console.error("Cart data getting error:",t),{}}}function He(t){try{return localStorage.setItem(ie,JSON.stringify(t)),!0}catch(e){return console.error("Cart saving error:",e),!1}}const A={details:"I Will Find You is a gripping thriller by the master of suspense, Harlan Coben. The story follows David Burroughs, a former prisoner wrongfully convicted of murdering his own son. When he discovers a clue suggesting his son might still be alive, David escapes from prison to uncover the truth. Fast-paced, emotional, and full of unexpected twists — this novel will keep you hooked until the very last page.",shipping:"We ship across the United States within 2–5 business days. All orders are processed through USPS or a reliable courier service. Enjoy free standard shipping on orders over $50.",returns:"You can return an item within 14 days of receiving your order, provided it hasn’t been used and is in its original condition. To start a return, please contact our support team — we’ll guide you through the process quickly and hassle-free."},W=new ke(document.querySelector(".accordion-container"),{showMultiple:!0,duration:400,collapse:!0});class le{constructor(e){R(this,"trapFocusHandler",e=>{if(e.key!=="Tab")return;const o=e.shiftKey,r=document.activeElement;o&&r===this.firstFocusableElement?(e.preventDefault(),this.lastFocusableElement.focus()):!o&&r===this.lastFocusableElement&&(e.preventDefault(),this.firstFocusableElement.focus())});if(!e)throw new Error("Modal Element not found");this.modalElement=e,this.escapeHandler=this.handleEscape.bind(this),this.closeClickHandler=this.handleCloseClick.bind(this)}open(){var o;this.modalElement.classList.add("is-open"),document.body.style.overflow="hidden";const e='a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])';this.focuableElements=this.modalElement.querySelectorAll(e),this.firstFocusableElement=this.focuableElements[0],this.lastFocusableElement=this.focuableElements[this.focuableElements.length-1],(o=this.firstFocusableElement)==null||o.focus(),document.addEventListener("keydown",this.trapFocusHandler),document.addEventListener("keydown",this.escapeHandler),this.modalElement.addEventListener("click",this.closeClickHandler)}close(){this.modalElement.classList.remove("is-open"),document.body.style.overflow="",document.removeEventListener("keydown",this.trapFocusHandler),document.removeEventListener("keydown",this.escapeHandler),this.modalElement.removeEventListener("click",this.closeClickHandler)}handleEscape(e){e.key==="Escape"&&this.close()}handleCloseClick(e){const o=this.modalElement.querySelector(".modal_close-btn"),r=o&&o.contains(e.target),n=e.target===this.modalElement;(r||n)&&this.close()}}class Pe extends le{constructor(e){if(super(e),this.form=this.modalElement.querySelector("#contactForm"),this.nameInput=this.form.querySelector("#user_name"),this.emailInput=this.form.querySelector("#user_email"),this.messageInput=this.form.querySelector("#user_message"),this.nameErrorContainer=this.form.querySelector(".contact-form-name .validation-error"),this.emailErrorContainer=this.form.querySelector(".contact-form-email .validation-error"),this.messageErrorContainer=this.form.querySelector(".contact-form-message .validation-error"),!this.form)throw new Error("Contact form not found in the modal");this.submitHandler=this.handleSubmit.bind(this),this.handleNameInput=this.clearErrorContainer.bind(this,this.nameInput,this.nameErrorContainer),this.handleEmailInput=this.clearErrorContainer.bind(this,this.emailInput,this.emailErrorContainer),this.handleMessageInput=this.clearErrorContainer.bind(this,this.messageInput,this.messageErrorContainer)}clearErrorContainer(e,o){e.classList.remove("invalid"),o.innerText=""}open(){super.open(),this.form.addEventListener("submit",this.submitHandler),this.nameInput.addEventListener("focus",this.handleNameInput),this.emailInput.addEventListener("focus",this.handleEmailInput),this.messageInput.addEventListener("focus",this.handleMessageInput)}close(){super.close(),this.form.removeEventListener("submit",this.submitHandler),this.nameInput.removeEventListener("focus",this.handleNameInput),this.emailInput.removeEventListener("focus",this.handleEmailInput),this.messageInput.removeEventListener("focus",this.handleMessageInput),this.form.reset()}validate(){const e=[],o={name:"❌ Please enter valid Name",email:{valid:"❌ Please enter valid Email",required:"❌ Email is a required field"},message:"❌ Message can not be empty"};this.nameInput.classList.remove("invalid"),this.emailInput.classList.remove("invalid"),this.messageInput.classList.remove("invalid"),this.nameInput.value.trim()===""&&(e.push(o.name),this.nameInput.classList.add("invalid"),this.nameErrorContainer.innerText=o.name);const r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return this.emailInput.value.trim()===""?(e.push(o.email.required),this.emailInput.classList.add("invalid"),this.emailErrorContainer.innerText=o.email.required):r.test(this.emailInput.value)||(e.push(o.email.valid),this.emailInput.classList.add("invalid"),this.emailErrorContainer.innerText=o.email.valid),this.messageInput.value.trim()===""&&(e.push(o.message),this.messageInput.classList.add("invalid"),this.messageErrorContainer.innerText=o.message),e}async handleSubmit(e){e.preventDefault();const o=new FormData(this.form),r=Object.fromEntries(o.entries());if(!(this.validate().length>0))try{await this.submitForm(r),h.show({position:"center",theme:"light",message:"❤︎ Your registration has been submitted."}),this.close()}catch(s){console.error("Form submission error:",s),h.show({position:"center",theme:"light",message:"✖ 'There was an error submitting your registration. Please try again.'"})}}async submitForm(e){console.log("Submitting form data:",e)}}class Fe extends le{constructor(e){super(e),this.eventHandler=this.handleEvents.bind(this)}async open(e){try{const o=await xe(e),r=this.prepareData(o);Ae(r),W&&W.closeAll(),super.open(),this.form=this.modalElement.querySelector("#bookModalActionForm"),this.form&&(this.form.addEventListener("click",this.eventHandler),this.form.addEventListener("submit",this.eventHandler))}catch(o){console.error(`Error loading book with ID ${e}:`,o),h.show({position:"center",theme:"light",message:"✖ 'Sorry, couldn't load the book details. Please try again later.'"})}}close(){super.close(),this.form&&(this.form.removeEventListener("click",this.eventHandler),this.form.removeEventListener("submit",this.eventHandler))}prepareData(e){return{bookId:e._id,bookPicture:e.book_image,bookTitle:e.title,bookAuthor:e.author,bookPrice:Number(e.price)||"9.99",bookQuantity:1,details:e.details||A.details,shipping:e.shipping||A.shipping,returns:e.returns||A.returns}}handleEvents(e){e.preventDefault();const o=e.target;switch(o.dataset.action){case"decrease":this.updateQuantity(-1);break;case"increase":this.updateQuantity(1);break;case"add-to-cart":this.handleAddToCart(o);break;case"buy-now":this.handleBuyNow();break}e.type==="submit"&&this.handleBuyNow()}updateQuantity(e){const o=this.form.querySelector(".quantity-input"),n=parseInt(o.value)+e;n>=1&&(o.value=n)}handleAddToCart(e){const r=e.closest("[data-book-id]").dataset.bookId,n=parseInt(this.form.querySelector(".quantity-input").value);h.show({theme:"light",progressBar:!0,message:`Book (${n} pcs) added`,target:".modal-books_message-container",timeout:3e3}),console.log(`Book with ID '${r}' (qty: ${n}) added to Cart.`),console.log(`Total ID '${r}' in Cart: ${De(r)}`),Te(r,n)}handleBuyNow(){console.log('"Buy Now" clicked.'),h.show({position:"center",theme:"light",message:"Thanks for buying!",timeout:3e3}),this.close()}}const Q=document.querySelector(".modal-contacts"),z=document.querySelector(".modal-books");let T,D;Q&&(T=new Pe(Q));z&&(D=new Fe(z));function G(t="Children’s Story Hour"){T?(document.querySelector("#modalDesc").textContent=t,T.open()):console.error("Contact modal is not initialized.")}function $e(t="660df41ba957e5c1ae0f519e"){D?D.open(t):console.error("Books modal is not initialized.")}window.addEventListener("open-contacts-modal",t=>{var o;const e=(o=t.detail)==null?void 0:o.title;e?G(e):(console.warn("Спроба відкрити модальне вікно реєстрації без назви події."),G())});const v=document.querySelector(".gallery"),H=document.querySelector("#category-select"),k=document.querySelector(".btn-show-more"),Y=document.querySelector(".visible-books"),Ne=document.querySelector(".total-books"),S=document.querySelector(".categories-list"),g=document.querySelector(".loader"),m=document.querySelector(".category-select-btn"),J=document.querySelector(".category-select-text"),a=document.querySelector(".category-dropdown");let p=[],y=0,j=window.innerWidth<768?"mobile":"desktop",f=!1;function N(){g==null||g.classList.remove("hidden")}function C(){g==null||g.classList.add("hidden")}async function Oe(){N();try{const t=await Ie();Ve(t),p=(await re()).flatMap(({books:o})=>o),O()}catch(t){console.error("❌ Помилка завантаження даних:",t),v.innerHTML='<li class="no-books">Не вдалося завантажити книги. Спробуйте пізніше.</li>'}finally{C()}}Oe();function Ve(t){H.innerHTML='<option selected value="All categories">All categories</option>',S.innerHTML='<li><button type="button" class="category-btn active-category" value="All categories">All categories</button></li>',a.innerHTML=`
    <li class="category-dropdown-item">
      <button type="button" class="category-dropdown-btn active" data-value="All categories">
        All categories
      </button>
    </li>
  `,t.forEach(e=>{const o=document.createElement("option");o.value=e,o.textContent=e,H.appendChild(o);const r=document.createElement("li");r.classList.add("category-item");const n=document.createElement("button");n.type="button",n.value=e,n.textContent=e,n.classList.add("category-btn"),r.appendChild(n),S.appendChild(r);const s=document.createElement("li");s.classList.add("category-dropdown-item");const i=document.createElement("button");i.type="button",i.classList.add("category-dropdown-btn"),i.dataset.value=e,i.textContent=e,s.appendChild(i),a.appendChild(s)})}function I(){f=!f,a==null||a.classList.toggle("hidden",!f),m==null||m.classList.toggle("open",f)}function Ke(t){J&&(J.textContent=t==="All categories"?"Categories":t),a==null||a.querySelectorAll(".category-dropdown-btn").forEach(e=>{e.classList.toggle("active",e.dataset.value===t)}),I(),ce(t)}m==null||m.addEventListener("click",t=>{t.stopPropagation(),I()});a==null||a.addEventListener("click",t=>{const e=t.target.closest(".category-dropdown-btn");e&&Ke(e.dataset.value)});document.addEventListener("click",t=>{f&&!(m!=null&&m.contains(t.target))&&!(a!=null&&a.contains(t.target))&&I()});document.addEventListener("keydown",t=>{t.key==="Escape"&&f&&I()});async function ce(t){N(),H.value=t,S.querySelectorAll(".category-btn").forEach(e=>e.classList.toggle("active-category",e.value===t));try{t==="All categories"?p=(await re()).flatMap(({books:o})=>o):p=await Be(t),y=me(),O()}catch(e){console.error("❌ Помилка при завантаженні книг:",e),v.innerHTML='<li class="no-books">Не вдалося завантажити книги цієї категорії</li>'}finally{C()}}S.addEventListener("click",t=>{t.preventDefault();const e=t.target.closest(".category-btn");e&&ce(e.value)});k.addEventListener("click",()=>{y+=4,de(),k.blur()});function O(){y=me(),de(),Ne.textContent=p.length,ue()}function de(){const t=p.slice(0,y);N(),requestAnimationFrame(()=>{setTimeout(()=>{if(t.length===0){v.innerHTML='<li class="no-books">No books found</li>',Y.textContent=0,k.classList.add("btn-show-more-hidden"),C();return}v.innerHTML=Re(t),Y.textContent=Math.min(y,p.length),ue(),C()},100)})}function ue(){y>=p.length?k.classList.add("btn-show-more-hidden"):k.classList.remove("btn-show-more-hidden")}function me(){return window.innerWidth<768?10:24}window.addEventListener("resize",Ue(()=>{const t=window.innerWidth<768?"mobile":"desktop";t!==j&&(j=t,O())},300));function Ue(t,e){let o;return(...r)=>{clearTimeout(o),o=setTimeout(()=>t(...r),e)}}v.addEventListener("click",t=>{const e=t.target.closest(".btn-book");e&&$e(e.dataset.id)});function Re(t){return t.map(({title:e,author:o,book_image:r,price:n,_id:s},i)=>{const u=typeof n=="number"?n.toFixed(2):n&&n.trim()!=="0.00"?n.trim():"9.99",l=X(e),d=X(o);return`
        <li class="book-card">
          <img
            loading="${i<3?"eager":"lazy"}"
            class="book-cover"
            src="${r}"
            alt="Book cover: ${l} by ${d}"
            width="150"
            height="auto"
          />
          <div class="book-card-info">
            <div class="book-card-descriptions">
              <h3 class="book-card-title">${l.toLowerCase()}</h3>
              <h4 class="book-card-author">${d}</h4>
            </div>
            <p class="book-price">$${u}</p>
          </div>
          <button
            type="button"
            class="btn-secondary btn-book"
            data-id="${s}"
            aria-label="Learn more about ${l} by ${d}"
          >
            Learn more
          </button>
        </li>`}).join("")}function X(t=""){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,o=>e[o])}function We(){const t=document.querySelector(".feedbacks-swiper");if(!t)return;const e=document.querySelector(".feedbacks-nav__btn--prev"),o=document.querySelector(".feedbacks-nav__btn--next"),r=document.querySelector(".feedbacks-pagination"),n=new $(t,{modules:[P,F,ne,we],slidesPerView:1,spaceBetween:16,watchOverflow:!0,navigation:{nextEl:o,prevEl:e},pagination:{el:r,clickable:!0},keyboard:{enabled:!0,onlyInViewport:!0},a11y:{enabled:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}}});n.on("afterInit",()=>{var s,i,u,l;(i=(s=n.pagination)==null?void 0:s.render)==null||i.call(s),(l=(u=n.pagination)==null?void 0:u.update)==null||l.call(u)})}document.addEventListener("DOMContentLoaded",We);const w=new $(".ev-swiper",{modules:[P,F],wrapperClass:"ev-list",slideClass:"ev-item",slidesPerView:1,spaceBetween:24,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3,spaceBetween:24}},pagination:{el:".ev-pagination",clickable:!0,bulletElement:"li",bulletClass:"ev-dot",bulletActiveClass:"ev-dot--active",renderBullet:(t,e)=>`<li class="${e}" aria-label="Go to slide ${t+1}" tabindex="0"></li>`},navigation:{prevEl:".ev-swipe-btn-prev",nextEl:".ev-swipe-btn-next"},watchOverflow:!0}),Z=document.querySelector(".ev-swipe-btn-prev"),ee=document.querySelector(".ev-swipe-btn-next");function B(){const t=w.isBeginning,e=w.isEnd;Z.toggleAttribute("disabled",t),ee.toggleAttribute("disabled",e),Z.setAttribute("aria-disabled",String(t)),ee.setAttribute("aria-disabled",String(e))}w.on("afterInit",B);w.on("slideChange",B);w.on("update",B);B();var oe;(oe=document.querySelector(".events-section"))==null||oe.addEventListener("click",t=>{const e=t.target.closest(".js-register");if(!e)return;const o={title:e.dataset.title||"Register",date:e.dataset.date||"",format:e.dataset.format||""};window.dispatchEvent(new CustomEvent("open-contacts-modal",{detail:o}))});const Qe=document.querySelector(".form-footer"),te=document.querySelector(".email-input");Qe.addEventListener("submit",function(t){t.preventDefault();const e=te.value.trim();if(!ze(e)){h.error({theme:"light",title:"Error",message:"Please enter a valid email address.",position:"topCenter",timeout:3e3});return}fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).then(o=>{if(!o.ok)throw new Error("Network response was not ok");return o.json()}).then(o=>{h.success({theme:"light",title:"Success",message:"Thank you for subscribing!",position:"topCenter",timeout:3e3,class:"footer-subscribe-toast"}),te.value=""}).catch(o=>{h.error({theme:"light",title:"Error",message:"There was an error processing your request. Please try again later.",position:"topCenter",timeout:3e3})})});function ze(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}const q=document.querySelector(".btn-up");function Ge(){const t=window.innerHeight;window.scrollY>t?q.classList.add("is-visible"):q.classList.remove("is-visible")}function Ye(){window.scrollTo({top:0,behavior:"smooth"})}q&&(window.addEventListener("scroll",Ge),q.addEventListener("click",Ye));
//# sourceMappingURL=index.js.map
